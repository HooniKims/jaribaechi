{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\vibe_coding_progects\\\\jaribaechi\\\\src\\\\components\\\\PrintLayout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport * as htmlToImage from 'html-to-image';\nimport './PrintLayout.css';\n\n// 배열을 랜덤하게 섞는 헬퍼 함수\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst shuffleArray = array => {\n  if (!array) return [];\n  const newArray = [...array];\n  for (let i = newArray.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n  }\n  return newArray;\n};\n\n// 분단 인덱스 계산 함수\nconst getSectionIndex = (colIndex, aisles) => {\n  let section = 0;\n  const sortedAisles = [...aisles].sort((a, b) => a - b);\n  for (const aisleIndex of sortedAisles) {\n    if (colIndex > aisleIndex) {\n      section++;\n    }\n  }\n  return section;\n};\nconst PrintLayout = ({\n  settings,\n  seatData,\n  onBack\n}) => {\n  _s();\n  const [isShuffling, setIsShuffling] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [countdown, setCountdown] = useState(10);\n  const [currentGrid, setCurrentGrid] = useState(null);\n  const [displayType, setDisplayType] = useState('nameAndId'); // 'nameAndId', 'nameOnly', 'idOnly'\n  const [isFlipped, setIsFlipped] = useState(false);\n  const printAreaRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const countdownIntervalRef = useRef(null);\n  useEffect(() => {\n    if (!(seatData !== null && seatData !== void 0 && seatData.grid)) {\n      setCurrentGrid([]);\n      setIsShuffling(false);\n      return;\n    }\n    if (!seatData.students || seatData.students.length === 0) {\n      setIsShuffling(false);\n      setCurrentGrid(seatData.grid);\n      return;\n    }\n\n    // skipAnimation이 true면 애니메이션 없이 즉시 표시\n    if (seatData.skipAnimation) {\n      setIsShuffling(false);\n      setCurrentGrid(seatData.grid);\n      return;\n    }\n    const studentList = seatData.students;\n    const duration = 10000;\n    const startTime = Date.now();\n    const animate = () => {\n      const shuffledStudents = shuffleArray(studentList);\n      let studentIndex = 0;\n      const newGrid = seatData.grid.map(row => row.map(seat => {\n        if (seat.occupied) {\n          const randomStudent = shuffledStudents[studentIndex % shuffledStudents.length];\n          studentIndex++;\n          return {\n            ...seat,\n            studentName: randomStudent.name,\n            studentId: randomStudent.number\n          };\n        }\n        return seat;\n      }));\n      setCurrentGrid(newGrid);\n      animationFrameRef.current = setTimeout(animate, 150);\n    };\n    setCurrentGrid(seatData.grid);\n    animationFrameRef.current = setTimeout(animate, 150);\n    countdownIntervalRef.current = setInterval(() => {\n      const elapsedTime = Date.now() - startTime;\n      const remainingTime = Math.max(0, duration - elapsedTime);\n      setCountdown(Math.ceil(remainingTime / 1000));\n      if (remainingTime <= 0) {\n        if (animationFrameRef.current) clearTimeout(animationFrameRef.current);\n        clearInterval(countdownIntervalRef.current);\n        setIsShuffling(false);\n        setCurrentGrid(seatData.grid);\n      }\n    }, 1000);\n    return () => {\n      if (animationFrameRef.current) clearTimeout(animationFrameRef.current);\n      if (countdownIntervalRef.current) clearInterval(countdownIntervalRef.current);\n    };\n  }, [seatData]);\n  const handlePrint = () => {\n    window.print();\n  };\n  const handleSaveAsImage = useCallback(() => {\n    const container = printAreaRef.current;\n    if (container === null) return;\n\n    // 실제 콘텐츠 영역만 캡처하기 위해 page-content-wrapper를 타겟으로 설정\n    const contentWrapper = container.querySelector('.page-content-wrapper');\n    if (!contentWrapper) return;\n    setIsSaving(true);\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const dateString = `${year}${month}${day}`;\n    const filename = `${settings.grade}학년 ${settings.classNumber}반 자리배치표(${dateString}).png`;\n\n    // A4 비율에 맞게 여백을 추가한 크기 계산\n    const mmToPx = mm => mm / 25.4 * 96; // 96 DPI 기준\n    const A4_WIDTH_PX = Math.round(mmToPx(210)); // 794px\n    const A4_HEIGHT_PX = Math.round(mmToPx(297)); // 1123px\n    const MARGIN_PX = Math.round(mmToPx(20)); // 20mm 여백\n\n    // page-content-wrapper를 A4 크기에 맞게 캡처\n    htmlToImage.toPng(contentWrapper, {\n      cacheBust: true,\n      backgroundColor: '#ffffff',\n      pixelRatio: 2,\n      // A4 크기에 여백을 고려한 크기로 캡처\n      width: A4_WIDTH_PX,\n      height: A4_HEIGHT_PX,\n      style: {\n        padding: `${MARGIN_PX}px`,\n        boxSizing: 'border-box',\n        width: A4_WIDTH_PX + 'px',\n        height: A4_HEIGHT_PX + 'px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'flex-start',\n        alignItems: 'center'\n      }\n    }).then(dataUrl => {\n      const link = document.createElement('a');\n      link.download = filename;\n      link.href = dataUrl;\n      link.click();\n    }).catch(err => {\n      console.error('이미지 변환에 실패했습니다.', err);\n    }).finally(() => {\n      setIsSaving(false);\n    });\n  }, [printAreaRef, settings.grade, settings.classNumber]);\n  if (!currentGrid) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"print-layout-final\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uC790\\uB9AC \\uBC30\\uCE58 \\uB370\\uC774\\uD130\\uB97C \\uC900\\uBE44 \\uC911\\uC785\\uB2C8\\uB2E4...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  }\n  const displayGrid = isFlipped && currentGrid ? [...currentGrid].reverse().map(row => [...row].reverse()) : currentGrid;\n  const seatingGrid = displayGrid ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"print-seating-area-final\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"print-seat-grid-final\",\n      children: displayGrid.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"print-seat-row-final\",\n        children: row.map((seat, colIndex) => {\n          const sectionIndex = getSectionIndex(colIndex, seatData.verticalAisles);\n          const nameStyle = {};\n          let displayName = seat.studentName;\n          const nameClasses = ['student-name-final'];\n          if (displayType === 'nameOnly' && seat.studentName) {\n            if (seat.studentName.length >= 4) {\n              nameStyle.fontSize = '0.8em';\n            } else if (seat.studentName.length === 2) {\n              displayName = seat.studentName.split('').join('  ');\n              nameClasses.push('short-name-2');\n            }\n          }\n          const infoStyle = {};\n          if (displayType === 'nameOnly' && seat.studentName && seat.studentName.length >= 4) {\n            const horizontalPadding = Math.max(0, 5 - (seat.studentName.length - 3) * 1);\n            infoStyle['--name-padding-x'] = `${horizontalPadding}px`;\n          }\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [colIndex > 0 && seatData.verticalAisles.includes(colIndex - 1) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"print-vertical-aisle-final\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `print-seat-final ${seat.occupied ? 'occupied' : 'hidden'}`,\n              \"data-section-index\": sectionIndex,\n              children: seat.occupied && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `print-student-info-final display-${displayType}`,\n                style: infoStyle,\n                children: [displayType !== 'idOnly' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: nameClasses.join(' '),\n                  style: nameStyle,\n                  children: displayName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 54\n                }, this), displayType !== 'nameOnly' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"student-id-final\",\n                  children: seat.studentId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 56\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this)]\n          }, colIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 17\n          }, this);\n        })\n      }, rowIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 169,\n    columnNumber: 5\n  }, this) : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `print-layout-final ${isShuffling ? 'shuffling' : ''}`,\n    children: [isSaving && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"saving-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"saving-message\",\n        children: \"\\uC870\\uAE08\\uB9CC \\uAE30\\uB2E4\\uB9AC\\uC2DC\\uBA74 \\uB2E4\\uC6B4\\uB85C\\uB4DC\\uAC00 \\uC2DC\\uC791\\uB429\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `countdown-overlay ${isShuffling ? 'show' : ''}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"countdown-number\",\n        children: countdown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"print-controls-wrapper no-print\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"print-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onBack,\n          className: \"back-btn\",\n          children: \"\\u2190 \\uBA54\\uC778\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSaveAsImage,\n          className: \"save-btn\",\n          disabled: isSaving,\n          children: \"\\uD83D\\uDDBC\\uFE0F \\uC774\\uBBF8\\uC9C0\\uB85C \\uC800\\uC7A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlePrint,\n          className: \"print-btn\",\n          children: \"\\uD83D\\uDDA8\\uFE0F \\uCD9C\\uB825\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"display-options\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `option-btn name-id-option ${displayType === 'nameAndId' ? 'active' : ''}`,\n          onClick: () => setDisplayType('nameAndId'),\n          children: \"\\uD559\\uBC88+\\uC774\\uB984\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `option-btn name-only-option ${displayType === 'nameOnly' ? 'active' : ''}`,\n          onClick: () => setDisplayType('nameOnly'),\n          children: \"\\uC774\\uB984\\uB9CC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `option-btn id-only-option ${displayType === 'idOnly' ? 'active' : ''}`,\n          onClick: () => setDisplayType('idOnly'),\n          children: \"\\uD559\\uBC88\\uB9CC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"option-btn flip-btn\",\n          onClick: () => setIsFlipped(!isFlipped),\n          children: \"\\uD83D\\uDD04 \\uC0C1\\uD558 \\uBCC0\\uACBD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"a4-container-final\",\n      ref: printAreaRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-content-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"print-header-final\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [settings.grade, \"\\uD559\\uB144 \", settings.classNumber, \"\\uBC18 \\uC790\\uB9AC\\uBC30\\uCE58\\uD45C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"print-date-final\",\n            children: new Date().toLocaleDateString('ko-KR', {\n              year: 'numeric',\n              month: 'long',\n              day: 'numeric'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"print-classroom-final\",\n          children: isFlipped ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"classroom-label-bottom\",\n              children: \"\\uAD50\\uD0C1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this), seatingGrid, /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"classroom-label-top\",\n              children: \"\\uAD50\\uC2E4 \\uB4A4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"classroom-label-top\",\n              children: \"\\uAD50\\uC2E4 \\uB4A4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), seatingGrid, /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"classroom-label-bottom\",\n              children: \"\\uAD50\\uD0C1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 5\n  }, this);\n};\n_s(PrintLayout, \"NIPzQAoLavGYm1pqe+QmGgSGZ7I=\");\n_c = PrintLayout;\nexport default PrintLayout;\nvar _c;\n$RefreshReg$(_c, \"PrintLayout\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","htmlToImage","jsxDEV","_jsxDEV","Fragment","_Fragment","shuffleArray","array","newArray","i","length","j","Math","floor","random","getSectionIndex","colIndex","aisles","section","sortedAisles","sort","a","b","aisleIndex","PrintLayout","settings","seatData","onBack","_s","isShuffling","setIsShuffling","isSaving","setIsSaving","countdown","setCountdown","currentGrid","setCurrentGrid","displayType","setDisplayType","isFlipped","setIsFlipped","printAreaRef","animationFrameRef","countdownIntervalRef","grid","students","skipAnimation","studentList","duration","startTime","Date","now","animate","shuffledStudents","studentIndex","newGrid","map","row","seat","occupied","randomStudent","studentName","name","studentId","number","current","setTimeout","setInterval","elapsedTime","remainingTime","max","ceil","clearTimeout","clearInterval","handlePrint","window","print","handleSaveAsImage","container","contentWrapper","querySelector","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","dateString","filename","grade","classNumber","mmToPx","mm","A4_WIDTH_PX","round","A4_HEIGHT_PX","MARGIN_PX","toPng","cacheBust","backgroundColor","pixelRatio","width","height","style","padding","boxSizing","display","flexDirection","justifyContent","alignItems","then","dataUrl","link","document","createElement","download","href","click","catch","err","console","error","finally","className","children","fileName","_jsxFileName","lineNumber","columnNumber","displayGrid","reverse","seatingGrid","rowIndex","sectionIndex","verticalAisles","nameStyle","displayName","nameClasses","fontSize","split","join","push","infoStyle","horizontalPadding","includes","onClick","disabled","ref","toLocaleDateString","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/vibe_coding_progects/jaribaechi/src/components/PrintLayout.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport * as htmlToImage from 'html-to-image';\r\nimport './PrintLayout.css';\r\n\r\n// 배열을 랜덤하게 섞는 헬퍼 함수\r\nconst shuffleArray = (array) => {\r\n  if (!array) return [];\r\n  const newArray = [...array];\r\n  for (let i = newArray.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\r\n  }\r\n  return newArray;\r\n};\r\n\r\n// 분단 인덱스 계산 함수\r\nconst getSectionIndex = (colIndex, aisles) => {\r\n  let section = 0;\r\n  const sortedAisles = [...aisles].sort((a, b) => a - b);\r\n  for (const aisleIndex of sortedAisles) {\r\n    if (colIndex > aisleIndex) {\r\n      section++;\r\n    }\r\n  }\r\n  return section;\r\n};\r\n\r\nconst PrintLayout = ({ settings, seatData, onBack }) => {\r\n  const [isShuffling, setIsShuffling] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [countdown, setCountdown] = useState(10);\r\n  const [currentGrid, setCurrentGrid] = useState(null);\r\n  const [displayType, setDisplayType] = useState('nameAndId'); // 'nameAndId', 'nameOnly', 'idOnly'\r\n  const [isFlipped, setIsFlipped] = useState(false);\r\n\r\n  const printAreaRef = useRef(null);\r\n  const animationFrameRef = useRef(null);\r\n  const countdownIntervalRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!seatData?.grid) {\r\n        setCurrentGrid([]);\r\n        setIsShuffling(false);\r\n        return;\r\n    }\r\n\r\n    if (!seatData.students || seatData.students.length === 0) {\r\n      setIsShuffling(false);\r\n      setCurrentGrid(seatData.grid);\r\n      return;\r\n    }\r\n\r\n    // skipAnimation이 true면 애니메이션 없이 즉시 표시\r\n    if (seatData.skipAnimation) {\r\n      setIsShuffling(false);\r\n      setCurrentGrid(seatData.grid);\r\n      return;\r\n    }\r\n\r\n    const studentList = seatData.students;\r\n    const duration = 10000;\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const shuffledStudents = shuffleArray(studentList);\r\n      let studentIndex = 0;\r\n      const newGrid = seatData.grid.map(row =>\r\n        row.map(seat => {\r\n          if (seat.occupied) {\r\n            const randomStudent = shuffledStudents[studentIndex % shuffledStudents.length];\r\n            studentIndex++;\r\n            return { ...seat, studentName: randomStudent.name, studentId: randomStudent.number };\r\n          }\r\n          return seat;\r\n        })\r\n      );\r\n      setCurrentGrid(newGrid);\r\n      animationFrameRef.current = setTimeout(animate, 150);\r\n    };\r\n\r\n    setCurrentGrid(seatData.grid);\r\n    animationFrameRef.current = setTimeout(animate, 150);\r\n\r\n    countdownIntervalRef.current = setInterval(() => {\r\n      const elapsedTime = Date.now() - startTime;\r\n      const remainingTime = Math.max(0, duration - elapsedTime);\r\n      setCountdown(Math.ceil(remainingTime / 1000));\r\n      if (remainingTime <= 0) {\r\n        if (animationFrameRef.current) clearTimeout(animationFrameRef.current);\r\n        clearInterval(countdownIntervalRef.current);\r\n        setIsShuffling(false);\r\n        setCurrentGrid(seatData.grid);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) clearTimeout(animationFrameRef.current);\r\n      if (countdownIntervalRef.current) clearInterval(countdownIntervalRef.current);\r\n    };\r\n  }, [seatData]);\r\n\r\n  const handlePrint = () => { window.print(); };\r\n\r\n  const handleSaveAsImage = useCallback(() => {\r\n    const container = printAreaRef.current;\r\n    if (container === null) return;\r\n\r\n    // 실제 콘텐츠 영역만 캡처하기 위해 page-content-wrapper를 타겟으로 설정\r\n    const contentWrapper = container.querySelector('.page-content-wrapper');\r\n    if (!contentWrapper) return;\r\n\r\n    setIsSaving(true);\r\n\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const dateString = `${year}${month}${day}`;\r\n    const filename = `${settings.grade}학년 ${settings.classNumber}반 자리배치표(${dateString}).png`;\r\n\r\n    // A4 비율에 맞게 여백을 추가한 크기 계산\r\n    const mmToPx = (mm) => (mm / 25.4) * 96; // 96 DPI 기준\r\n    const A4_WIDTH_PX = Math.round(mmToPx(210)); // 794px\r\n    const A4_HEIGHT_PX = Math.round(mmToPx(297)); // 1123px\r\n    const MARGIN_PX = Math.round(mmToPx(20)); // 20mm 여백\r\n\r\n    // page-content-wrapper를 A4 크기에 맞게 캡처\r\n    htmlToImage.toPng(contentWrapper, { \r\n      cacheBust: true, \r\n      backgroundColor: '#ffffff', \r\n      pixelRatio: 2,\r\n      // A4 크기에 여백을 고려한 크기로 캡처\r\n      width: A4_WIDTH_PX,\r\n      height: A4_HEIGHT_PX,\r\n      style: {\r\n        padding: `${MARGIN_PX}px`,\r\n        boxSizing: 'border-box',\r\n        width: A4_WIDTH_PX + 'px',\r\n        height: A4_HEIGHT_PX + 'px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-start',\r\n        alignItems: 'center'\r\n      }\r\n    })\r\n      .then((dataUrl) => {\r\n        const link = document.createElement('a');\r\n        link.download = filename;\r\n        link.href = dataUrl;\r\n        link.click();\r\n      })\r\n      .catch((err) => { console.error('이미지 변환에 실패했습니다.', err); })\r\n      .finally(() => {\r\n        setIsSaving(false);\r\n      });\r\n  }, [printAreaRef, settings.grade, settings.classNumber]);\r\n\r\n  if (!currentGrid) {\r\n    return (\r\n      <div className=\"print-layout-final\">\r\n        <div className=\"error-message\"><h2>자리 배치 데이터를 준비 중입니다...</h2></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const displayGrid = isFlipped && currentGrid ? [...currentGrid].reverse().map(row => [...row].reverse()) : currentGrid;\r\n\r\n  const seatingGrid = displayGrid ? (\r\n    <div className=\"print-seating-area-final\">\r\n      <div className=\"print-seat-grid-final\">\r\n        {displayGrid.map((row, rowIndex) => (\r\n          <div key={rowIndex} className=\"print-seat-row-final\">\r\n            {row.map((seat, colIndex) => {\r\n              const sectionIndex = getSectionIndex(colIndex, seatData.verticalAisles);\r\n              \r\n              const nameStyle = {};\r\n              let displayName = seat.studentName;\r\n              const nameClasses = ['student-name-final'];\r\n\r\n              if (displayType === 'nameOnly' && seat.studentName) {\r\n                if (seat.studentName.length >= 4) {\r\n                  nameStyle.fontSize = '0.8em';\r\n                } else if (seat.studentName.length === 2) {\r\n                  displayName = seat.studentName.split('').join('  ');\r\n                  nameClasses.push('short-name-2');\r\n                }\r\n              }\r\n\r\n              const infoStyle = {};\r\n              if (displayType === 'nameOnly' && seat.studentName && seat.studentName.length >= 4) {\r\n                  const horizontalPadding = Math.max(0, 5 - (seat.studentName.length - 3) * 1);\r\n                  infoStyle['--name-padding-x'] = `${horizontalPadding}px`;\r\n              }\r\n\r\n              return (\r\n                <React.Fragment key={colIndex}>\r\n                  {colIndex > 0 && seatData.verticalAisles.includes(colIndex - 1) && (\r\n                    <div className=\"print-vertical-aisle-final\"></div>\r\n                  )}\r\n                  <div \r\n                    className={`print-seat-final ${seat.occupied ? 'occupied' : 'hidden'}`}\r\n                    data-section-index={sectionIndex}\r\n                  >\r\n                    {seat.occupied && (\r\n                      <div className={`print-student-info-final display-${displayType}`}\r\n                           style={infoStyle}\r\n                      >\r\n                        {displayType !== 'idOnly' && <div className={nameClasses.join(' ')} style={nameStyle}>{displayName}</div>}\r\n                        {displayType !== 'nameOnly' && <div className=\"student-id-final\">{seat.studentId}</div>}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  return (\r\n    <div className={`print-layout-final ${isShuffling ? 'shuffling' : ''}`}>\r\n      {isSaving && (\r\n        <div className=\"saving-overlay\">\r\n          <div className=\"saving-message\">조금만 기다리시면 다운로드가 시작됩니다.</div>\r\n        </div>\r\n      )}\r\n      <div className={`countdown-overlay ${isShuffling ? 'show' : ''}`}>\r\n        <div className=\"countdown-number\">{countdown}</div>\r\n      </div>\r\n\r\n      <div className=\"print-controls-wrapper no-print\">\r\n        <div className=\"print-controls\">\r\n            <button onClick={onBack} className=\"back-btn\">← 메인으로 돌아가기</button>\r\n            <button onClick={handleSaveAsImage} className=\"save-btn\" disabled={isSaving}>🖼️ 이미지로 저장</button>\r\n            <button onClick={handlePrint} className=\"print-btn\">🖨️ 출력하기</button>\r\n        </div>\r\n        <div className=\"display-options\">\r\n            <button className={`option-btn name-id-option ${displayType === 'nameAndId' ? 'active' : ''}`} onClick={() => setDisplayType('nameAndId')}>학번+이름</button>\r\n            <button className={`option-btn name-only-option ${displayType === 'nameOnly' ? 'active' : ''}`} onClick={() => setDisplayType('nameOnly')}>이름만</button>\r\n            <button className={`option-btn id-only-option ${displayType === 'idOnly' ? 'active' : ''}`} onClick={() => setDisplayType('idOnly')}>학번만</button>\r\n            <button className=\"option-btn flip-btn\" onClick={() => setIsFlipped(!isFlipped)}>🔄 상하 변경</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"a4-container-final\" ref={printAreaRef}>\r\n        <div className=\"page-content-wrapper\">\r\n          <header className=\"print-header-final\">\r\n            <h1>{settings.grade}학년 {settings.classNumber}반 자리배치표</h1>\r\n            <p className=\"print-date-final\">{new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}</p>\r\n          </header>\r\n\r\n          <main className=\"print-classroom-final\">\r\n            {isFlipped ? (\r\n              <>\r\n                <div className=\"classroom-label-bottom\">교탁</div>\r\n                {seatingGrid}\r\n                <div className=\"classroom-label-top\">교실 뒤</div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div className=\"classroom-label-top\">교실 뒤</div>\r\n                {seatingGrid}\r\n                <div className=\"classroom-label-bottom\">교탁</div>\r\n              </>\r\n            )}\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrintLayout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}